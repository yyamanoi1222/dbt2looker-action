# dbt2looker-action
Github actions to run dbt2looker

https://github.com/lightdash/dbt2looker

# Usage

See action.yml for the full documentation for this action's inputs and outputs.


```yml
name: gen lookml                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                             
on:                                                                                                                                                                                                                                                                                                                          
  pull_request:                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                             
jobs:                                                                                                                                                                                                                                                                                                                        
  run:                                                                                                                                                                                                                                                                                                                       
    runs-on: ubuntu-latest                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                                                                             
    steps:                                                                                                                                                                                                                                                                                                                   
      - uses: actions/setup-python@v4                                                                                                                                                                                                                                                                                        
      - uses: actions/checkout@v3                                                                                                                                                                                                                                                                                            
        with:                                                                                                                                                                                                                                                                                                                
          ref: ${{ github.event.pull_request.head.ref }}                                                                                                                                                                                                                                                                     
      - uses: ./actions/dbt2looker
        with:
          tag: "dev"
      - name: Diff                                                                                                                                                                                                                                                                                                           
        id: diff                                                                                                                                                                                                                                                                                                             
        run: |                                                                                                                                                                                                                                                                                                               
          git add -N .                                                                                                                                                                                                                                                                                                       
          git diff --name-only --exit-code                                                                                                                                                                                                                                                                                   
        continue-on-error: true                                                                                                                                                                                                                                                                                              
      - name: Commit & Push                                                                                                                                                                                                                                                                                                  
        run: |                                                                                                                                                                                                                                                                                                               
          set -x                                                                                                                                                                                                                                                                                                             
          git config user.name github-actions[bot]                                                                                                                                                                                                                                                                           
          git config user.email github-actions[bot]@users.noreply.github.com                                                                                                                                                                                                                                        
          git add .                                                                                                                                                                                                                                                                                                          
          git commit --author=. -m 'generated'                                                                                                                                                                                                                                                                               
          git push                                                                                                                                                                                                                                                                                                           
        if: steps.diff.outcome == 'failure'   
```
